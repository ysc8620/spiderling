SELECT cp.`id_product` FROM `ps_category_product` cp 
INNER JOIN `ps_category_group` cg ON cp.`id_category` = cg.`id_category` 
INNER JOIN `ps_category` c ON cp.`id_category` = c.`id_category` 
INNER JOIN `ps_product` p ON cp.`id_product` = p.`id_product` 
LEFT JOIN ps_product_shop product_shop ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1) 
WHERE 
c.`active` = 1 AND product_shop.`active` = 1 
AND product_shop.`visibility` IN ("both", "search") 
AND product_shop.indexed = 1 AND cg.`id_group` = 1 



SELECT p.*, product_shop.*, stock.out_of_stock, IFNULL(stock.quantity, 0) as quantity, pl.`description`, pl.`description_short`, pl.`link_rewrite`, 
pl.`meta_description`, pl.`meta_keywords`, pl.`meta_title`, pl.`name`, pl.`available_now`, pl.`available_later`, MAX(image_shop.`id_image`) id_image,
il.`legend`, m.`name` AS manufacturer_name, product_shop.`date_add` > "2014-09-04" as new, MAX(product_attribute_shop.id_product_attribute) id_product_attribute 

FROM `ps_product` p 
INNER JOIN ps_product_shop product_shop ON (product_shop.id_product = p.id_product AND product_shop.id_shop = 1) 
LEFT JOIN `ps_product_lang` `pl` ON p.`id_product` = pl.`id_product` AND pl.`id_lang` = 1 AND pl.id_shop = 1 
LEFT JOIN `ps_image` `i` ON i.`id_product` = p.`id_product` 
LEFT JOIN ps_image_shop image_shop ON (image_shop.id_image = i.id_image AND image_shop.id_shop = 1 AND image_shop.cover=1) 
LEFT JOIN `ps_image_lang` `il` ON i.`id_image` = il.`id_image` AND il.`id_lang` = 1 
LEFT JOIN `ps_manufacturer` `m` ON m.`id_manufacturer` = p.`id_manufacturer` LEFT OUTER JOIN `ps_product_attribute` pa ON p.`id_product` = pa.`id_product`
LEFT JOIN ps_product_attribute_shop product_attribute_shop ON (product_attribute_shop.id_product_attribute = pa.id_product_attribute AND product_attribute_shop.id_shop = 1 AND product_attribute_shop.default_on = 1) 
LEFT JOIN ps_stock_available stock ON (stock.id_product = p.id_product AND stock.id_product_attribute = IFNULL(`product_attribute_shop`.id_product_attribute, 0) AND stock.id_shop = 1 AND stock.id_shop_group = 0 ) 
WHERE (product_shop.`active` = 1) AND (product_shop.`visibility` IN ("both", "catalog")) AND (product_shop.`date_add` > "2014-09-04") 
AND (p.`id_product` IN ( 

SELECT cp.`id_product` FROM `ps_category_group` cg 
LEFT JOIN `ps_category_product` cp ON (cp.`id_category` = cg.`id_category`) 
WHERE cg.`id_group` AND p.`id_product` IN ( SELECT cp.`id_product` FROM `ps_category_group` cg 
LEFT JOIN `ps_category_product` cp ON (cp.`id_category` = cg.`id_category`) WHERE cg.`id_group` = 1 ) )
) 
GROUP BY product_shop.id_product ORDER BY p.`date_add` DESC LIMIT 8